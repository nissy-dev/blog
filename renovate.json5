{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": ["config:recommended"],
  "repositories": ["nissy-dev/blog"],
  "gitAuthor": "Renovate Bot <bot@renovateapp.com>",
  "platform": "github",
  "enabledManagers": ["npm", "github-actions", "docker-compose", "dockerfile"],
  "automerge": true,
  "rebaseWhen": "conflicted",
  "labels": ["renovate"],
  // cron で実行するので limit は 0 にしておく
  "prConcurrentLimit": 0,
  "prHourlyLimit": 0,
  "minimumReleaseAge": "3 days",
  "rangeStrategy": "pin",
  "separateMultipleMajor": true,
  "packageRules": [
    {
      "matchDepTypes": ["action"],
      "excludePackagePrefixes": ["actions/"],
      "pinDigests": true,
      "groupName": "actions"
    },
    {
      "matchDepTypes": ["dependencies"],
      "groupName": "dependencies"
    },
    {
      "matchDepTypes": ["devDependencies"],
      "groupName": "devDependencies"
    },
    // next.js は minimumReleaseAge を伸ばす
    {
      "matchPackageNames": ["next"],
      "matchManagers": ["npm"],
      "minimumReleaseAge": "14 days"
    },
    // Node.js のアップデートは LTS に限定する
    {
      "groupName": "Node.js",
      "matchPackageNames": ["node", "@types/node"],
      // この正規表現は､下記を表す。
      // - Major: 偶数のみ
      // - Minor: 全て対象
      // - Patch: 0 のみ対象
      "allowedVersions": "/^[0-9]+[24680]\\.[0-9]+\\.0$/"
    },
  ]
}
